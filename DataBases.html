<!DOCTYPE html>
<html lang="en">
<head>
  <title>Afinidata</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>

<div class="jumbotron text-center">
  <h1>Documentación de las bases de datos</h1>
  <p>Éste documento pretende dar una vista general de la organización de los datos, así como su significado. Para ver
      una documentación detallada de las tablas y columnas puedes revisar estos documentos:
  <a href="https://drive.google.com/file/d/1w5os8Z-OYPf05UxfVwkbJgy1q3ep4z3Q/view?usp=sharing" target="_blank">Diagrama de base de datos</a>
  <a href="https://docs.google.com/document/d/1ccqn3xCmNv2hTifqj1FdNQyyIwitlFEcDGwKBl5dg9Q/edit?usp=sharing" target="_blank">Documentación del core</a>
    </p>
  <p>También puedes ver la documentación de los modelos de recomendación de contenido:
  <a href="https://drive.google.com/file/d/13hTEvKEPVMkkw1acsfSuNT95VukwgrJJ/view?usp=sharing" target="_blank">Sistema de recomendación</a>
  <a href="https://github.com/afinidata2019/afinidata_recommender/blob/master/README.md" target="_blank">Repositorio del recomendador</a>
    </p>

  <p>Haz click en las bases de datos y modelos para ver más información</p>
  Tags:
    <span class="badge badge-primary">Database</span>
    <span class="badge badge-success">Model</span>
    <span class="badge badge-info">Table</span>
</div>

<div class="card"><div class="card-header" href="#" data-toggle="collapse" data-target="#CM_DB_info,#CM_DB_details" aria-expanded="true" aria-controls="#CM_DB_info,#CM_DB_details"><h3>Content Manager <span class="badge badge-primary">CM_DB</span></h3><p class="collapse show" id="CM_DB_info">Maneja el contenido y las actividades que se presentan a los usuarios. También guarda información de los usuarios registrados en messenger. Cada contenido tiene características relacionadas que sirven para el modelo de recomendación. Además, los contenidos tienen preguntas asociadas para evaluar el desempeño de los niños en las actividades.</p> </div><div class="card-body collapse" id="CM_DB_details"><h5 class="card-title">Modelos:</h5><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#articles_info,#articles_details" aria-expanded="true" aria-controls="#articles_info,#articles_details"><div class="d-flex w-100 justify-content-between" ><h5>Artículos <span class="badge badge-success">articles</span></h5></div><p class="collapse show" id="articles_info">Actividades y contenido para sugerir a los usuarios</p></a><ul class="list-group collapse" id="articles_details"><li class="list-group-item"><span class="badge badge-info">articles_article</span>  Artículo: <small class="text-muted">Incluye el nombre, un resumen de la actividad, el texto completo de la actividad y el link a una página de wordpress donde está el contenido. Además incluye un rango de meses del niño sugerido para cada artículo.</small></li><li class="list-group-item"><span class="badge badge-info">articles_articletranslate</span>  Traducciones: <small class="text-muted">Permite guardar traducciones de los artículos, actualmente no se tienen datos en esta tabla.</small></li><li class="list-group-item"><span class="badge badge-info">articles_interaction</span>  Interacciones con artículos: <small class="text-muted">Se guarda la fecha y hora en la que se le fue enviado un artículo al usuario, aunque se podrían guardar otros tipos de interracciones.</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#posts_info,#posts_details" aria-expanded="true" aria-controls="#posts_info,#posts_details"><div class="d-flex w-100 justify-content-between" ><h5>Posts <span class="badge badge-success">posts</span></h5></div><p class="collapse show" id="posts_info">Son las actividades que se le presentan a los usuarios. Estas pueden tener traducción a diferentes idiomas y tienen preguntas y respuestas asociadas para medir el desempeño de los niños.</p></a><ul class="list-group collapse" id="posts_details"><li class="list-group-item"><span class="badge badge-info">posts_posts</span>  Post: <small class="text-muted">El contenido del post y el link a la página de wordpress</small></li><li class="list-group-item"><span class="badge badge-info">posts_area</span>  Área: <small class="text-muted">Cada actividad puede tener un área: Motor, cognitivo o socio-emocional</small></li><li class="list-group-item"><span class="badge badge-info">posts_subarea</span>  Subárea: <small class="text-muted">Cada pos puede tener subáreas como lenguaje, sensorial, motricidad fina, etc.</small></li><li class="list-group-item"><span class="badge badge-info">posts_componente</span>  Componentes: <small class="text-muted">Los posts pueden contar con tags que muestran de qué trata la actividad, por ejemplo: Articulación y fonética, Coordinación, Danza y teatro, Literatura, Geografía, Música, Números y conteo, Vocabulario, entre otros.</small></li><li class="list-group-item"><span class="badge badge-info">posts_taxonomy</span>  Taxonomía: <small class="text-muted">Recopila múltiples áreas, subáreas y componentes para cada post</small></li><li class="list-group-item"><span class="badge badge-info">posts_situacional</span>  Situacional: <small class="text-muted">Da información acerca de cuando conviene realizar la actividad, por ejemplo de día, en casa, al aire libre, día caluroso, etc.</small></li><li class="list-group-item"><span class="badge badge-info">posts_materiales</span>  Materiales: <small class="text-muted">Da información sobre los materiales necesarios para cada actividad, por ejemplo juguetes, ropa, reciclados, etc.</small></li><li class="list-group-item"><span class="badge badge-info">posts_interaction</span>  Interacción: <small class="text-muted">Se guarda fecha y hora de cuándo el usuario inició sesión, recibió una actividad, o abrió una actividad</small></li><li class="list-group-item"><span class="badge badge-info">posts_label</span>  Labels o tags: <small class="text-muted">Metadata relacionada a cada post</small></li><li class="list-group-item"><span class="badge badge-info">posts_postlocale</span>  Traducciones: <small class="text-muted">Se permite guardar posts traducidos, haciendo referencia a los  posts originales y el nuevo lenguaje. Incluye también el  contenido del post y el link a la página de wordpress</small></li><li class="list-group-item"><span class="badge badge-info">posts_question</span>  Preguntas: <small class="text-muted">Son preguntas relacionadas a cada post para evaluar el desempeño del niño en cada actividad.</small></li><li class="list-group-item"><span class="badge badge-info">posts_questionresponse</span>  Respuestas: <small class="text-muted">Son las respuestas predeterminadas para cada pregunta.</small></li><li class="list-group-item"><span class="badge badge-info">posts_response</span>  Respuestas del usuario: <small class="text-muted">Son las respuestas registradas de cada usuario a cada actividad</small></li><li class="list-group-item"><span class="badge badge-info">posts_postcomplexity</span>  Complejidad: <small class="text-muted">Se guarda una respuesta del usuario de que tan fácil o difícil sintió el niño la actividad que se le sugirió. Los usuarios pueden omitir el  porceso de evaluación, por lo que pueden faltar datos.</small></li><li class="list-group-item"><span class="badge badge-info">posts_review</span>  Review: <small class="text-muted">Se guarda un estado de completado o pendiente y un comentario de cada usuario para cada actividad</small></li><li class="list-group-item"><span class="badge badge-info">posts_tip</span>  Tips: <small class="text-muted">Recomendaciones que se les pueden dar a los usuarios para cada actividad. Actualmente no se tienen datos.</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#messenger_users_info,#messenger_users_details" aria-expanded="true" aria-controls="#messenger_users_info,#messenger_users_details"><div class="d-flex w-100 justify-content-between" ><h5>Usuarios <span class="badge badge-success">messenger_users</span></h5></div><p class="collapse show" id="messenger_users_info">Son los usuarios que interactuan con el chatbot en messenger. Aquí se guarda cierta información del usuario y del niño. Actualmente cada usuario puede tener varios niños, por lo que la información de cada niño ahora se guarda en el Core, revisar el apartado de Niños (instances).</p></a><ul class="list-group collapse" id="messenger_users_details"><li class="list-group-item"><span class="badge badge-info">messenger_users_user</span>  Usuarios: <small class="text-muted">Listado de los usuarios de messenger</small></li><li class="list-group-item"><span class="badge badge-info">messenger_users_userdata</span>  Meta data del usuario: <small class="text-muted">Incluye datos como la cantidad de hijos, primer nombre, apellidos, meses del niño, ciudad, cómo se enteró de Afinidata, entre otros.</small></li><li class="list-group-item"><span class="badge badge-info">messenger_users_activity</span>  Actividad del usuario: <small class="text-muted">Incluye estados del usuario como 'wait', 'opened', 'timed_start'</small></li><li class="list-group-item"><span class="badge badge-info">messenger_users_child</span>  Niños (anterior): <small class="text-muted">Incluye nombre del niño y fecha de creación</small></li><li class="list-group-item"><span class="badge badge-info">messenger_users_childdata</span>  Meta data del niño (anterior): <small class="text-muted">Incluye meses y estatura, entre otros</small></li></ul></div></div><div class="card"><div class="card-header" href="#" data-toggle="collapse" data-target="#core_info,#core_details" aria-expanded="true" aria-controls="#core_info,#core_details"><h3>Core <span class="badge badge-primary">core</span></h3><p class="collapse show" id="core_info">Guarda información de los niños e interacciones con las actividades. Se guardan también grupos de niños. Por otro lado, se guardan programas y etapas, que son las etapas de desarrollo de los niños. También se guarda información del bot actualmente utilizado. Por último, se guarda el flujo de las conversaciones del bot en forma de sesiones.</p> </div><div class="card-body collapse" id="core_details"><h5 class="card-title">Modelos:</h5><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#programs_info,#programs_details" aria-expanded="true" aria-controls="#programs_info,#programs_details"><div class="d-flex w-100 justify-content-between" ><h5>Programas <span class="badge badge-success">programs</span></h5></div><p class="collapse show" id="programs_info">Son posibles programas diseñados para el desarrollo de niños, estos pueden variar según las condiciones o necesidades de un sector demográfico.</p></a><ul class="list-group collapse" id="programs_details"><li class="list-group-item"><span class="badge badge-info">programs_program</span>  Programas: <small class="text-muted">Actualmente solo se cuenta con un programa.</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#levels_info,#levels_details" aria-expanded="true" aria-controls="#levels_info,#levels_details"><div class="d-flex w-100 justify-content-between" ><h5>Etapas <span class="badge badge-success">levels</span></h5></div><p class="collapse show" id="levels_info">Estas son etapas del programa dadas por los meses del niño, en cada etapa se tienen metas diferentes para su desarrollo.</p></a><ul class="list-group collapse" id="levels_details"><li class="list-group-item"><span class="badge badge-info">programs_level</span>  Etapas: <small class="text-muted">El nombre, la descripción y el rango de meses a los que pertenececada etapa.</small></li><li class="list-group-item"><span class="badge badge-info">programs_levelmilestoneassociation</span>  Etapas y milestones: <small class="text-muted">Cada etapa tiene asociado un conjuto de milstones.</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#milestones_info,#milestones_details" aria-expanded="true" aria-controls="#milestones_info,#milestones_details"><div class="d-flex w-100 justify-content-between" ><h5>Milestones <span class="badge badge-success">milestones</span></h5></div><p class="collapse show" id="milestones_info">Son logros que puede ir alcanzando el niño durante su crecimiento, se usan para medir su desarrollo</p></a><ul class="list-group collapse" id="milestones_details"><li class="list-group-item"><span class="badge badge-info">areas_area</span>  Área: <small class="text-muted">Cada milestone puede tener un área: Motor, cognitivo o socio-emocional</small></li><li class="list-group-item"><span class="badge badge-info">milestones_milestone</span>  Milestones: <small class="text-muted">Preguntas de los logros alcanzados. Están relacionados con un área</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#instances_info,#instances_details" aria-expanded="true" aria-controls="#instances_info,#instances_details"><div class="d-flex w-100 justify-content-between" ><h5>Niños <span class="badge badge-success">instances</span></h5></div><p class="collapse show" id="instances_info"></p></a><ul class="list-group collapse" id="instances_details"><li class="list-group-item"><span class="badge badge-info">instances_instance</span>  Niño: <small class="text-muted">Nombre del niño, la fecha de creación y si ya nació o sigue en el proceso de embarazo.</small></li><li class="list-group-item"><span class="badge badge-info">instances_instanceassociationuser</span>  Usuario del Niño: <small class="text-muted">Se relaciona el usuario (messenger_user) con múltiples niños, en caso el usuario tenga varios niños</small></li><li class="list-group-item"><span class="badge badge-info">instances_attributevalue</span>  Atributos: <small class="text-muted">Aquí se guarda la metadata de cada niño.</small></li><li class="list-group-item"><span class="badge badge-info">instances_postinteraction</span>  Iteracciones: <small class="text-muted">Contiene estados 'session', 'opened' y 'dispatched' que muestran las interacciones de cada niño con cada actividad (post)</small></li><li class="list-group-item"><span class="badge badge-info">instances_response</span>  Respuestas: <small class="text-muted">Aquí se guardan las respuestas de los padres acerca el cumplimiento de las milestones.</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#groups_info,#groups_details" aria-expanded="true" aria-controls="#groups_info,#groups_details"><div class="d-flex w-100 justify-content-between" ><h5>Grupos <span class="badge badge-success">groups</span></h5></div><p class="collapse show" id="groups_info">Los niños se pueden agrupar en caso se quiera monitorear el progreso por grupos.</p></a><ul class="list-group collapse" id="groups_details"><li class="list-group-item"><span class="badge badge-info">groups_group</span>  Grupos: <small class="text-muted">Nombre del grupo, fecha de creación</small></li><li class="list-group-item"><span class="badge badge-info">groups_code</span>  Grupos de grupos: <small class="text-muted">Permite formar grupos de grupos, por ejemplo una directora puede estar acargo de varias maestras que a su vez están a cargo de un grupo de niños.</small></li><li class="list-group-item"><span class="badge badge-info">groups_rolegroupuser</span>  Encargados de grupo: <small class="text-muted">A usuarios internos se les puede encargar uno o varios grupos</small></li><li class="list-group-item"><span class="badge badge-info">groups_programassignation</span>  Programa del grupo: <small class="text-muted">Se puede especificar el programa que se pretende impartir a cada grupo.</small></li><li class="list-group-item"><span class="badge badge-info">groups_botassignation</span>  Bot de grupo: <small class="text-muted">A cada grupo se le puede asignar un bot a utilizar con los integrantes del mismo.</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#bots_info,#bots_details" aria-expanded="true" aria-controls="#bots_info,#bots_details"><div class="d-flex w-100 justify-content-between" ><h5>Bots <span class="badge badge-success">bots</span></h5></div><p class="collapse show" id="bots_info"></p></a><ul class="list-group collapse" id="bots_details"><li class="list-group-item"><span class="badge badge-info">bots_bot</span>  Bots: <small class="text-muted">Nombre de los bots disponibles: Afinibot y Afinibot UAE</small></li></ul><a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="collapse"data-target="#user_sessions_info,#user_sessions_details" aria-expanded="true" aria-controls="#user_sessions_info,#user_sessions_details"><div class="d-flex w-100 justify-content-between" ><h5>Flujo de conversaciones <span class="badge badge-success">user_sessions</span></h5></div><p class="collapse show" id="user_sessions_info">Se pretende guardar el flujo de las conversaciones para que desde aquí se pueda implementar en Chatfuel o Rasa.</p></a><ul class="list-group collapse" id="user_sessions_details"><li class="list-group-item"><span class="badge badge-info">user_sessions_session</span>  Sesión: <small class="text-muted">Es un flujo de una conversación. Pueden haber varios flujos de conversaciones distintas.</small></li><li class="list-group-item"><span class="badge badge-info">user_sessions_field</span>  Flujo: <small class="text-muted">Aquí se determina el flujo de la conversación, i.e. el orden en el que se muestran los mensajes</small></li><li class="list-group-item"><span class="badge badge-info">user_sessions_message</span>  Mensajes: <small class="text-muted">Se guardan los mensajes a utilizar en las conversaciones</small></li><li class="list-group-item"><span class="badge badge-info">user_sessions_reply</span>  Respuestas cortas: <small class="text-muted">Se guardan las respuestas cortas predeterminadas que se muestran al usuario para responder.</small></li><li class="list-group-item"><span class="badge badge-info">user_sessions_redirectblock</span>  Acción en chatfuel: <small class="text-muted">Se guardan la acción o bloque que se ejecuta generalmente al final de la conversación como por ejemplo, mostrar una actividad.</small></li></ul></div></div>
<div class="card">
  <div class="card-header">Notas:</div>
  <div class="card-body">
    <ul>
      <li>Hay que reestructurar ciertas tablas, como la tabla de áreas, que esta en el content manager y el core. Los datos de los niños, que estan en Usuarios y en Instancias.</li>
      <li>Las interacciones estan en dos tablas diferentes y podrían estar es una sola que guarde el usuario y la instancia.</li>
      <li>Las respuestas y los reviews solo están relacionadas a los usuarios pero no a las instancias.</li>
      <li>Por el momento se planea dejar el Content Manager para creación de contenido independiente de los usuarios.</li>
      <li>Los programas, los niveles y las sesiones (flujos de conversaciones) pasaría al content manager y los usuarios
      (messenger users) al core, en conjunto con todas sus interacciones. Además es necesario asociarle la las interacciones
      que correspondan las instancias.</li>
      <li>En el content manager quedaría solo el contenido de las sesiones y la metadata (edad, tema, lenguaje), mientras que
      en el core solo las relaciones de a qué grupo pertenece y las interacciones de quienes lo consumen.</li>
      <li>Los milestones pueden estar en el content manager, y en el core solo guardarse las interacciones de los niños con
      los milestones (milestones completadas).</li>
    </ul>
  </div>
</div>
</body>
</html>
